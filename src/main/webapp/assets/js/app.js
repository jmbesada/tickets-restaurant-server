// Generated by CoffeeScript 1.6.2
(function() {
  var app;

  app = angular.module('ticketsRestaurant', []);

  app.config(function($routeProvider) {
    $routeProvider.when('/', {
      controller: 'UserAccessController',
      templateUrl: '/views/userAccessView.html'
    });
    return $routeProvider.when('/userDetail', {
      controller: 'UserDetailController',
      templateUrl: '/views/userDetail.html'
    });
  });

  app.controller('UserAccessController', function($scope, $rootScope, $browser, $location, JSONService) {
    console.log('Started the UserAccessController');
    JSONService.getUserAccess().success(function(data) {
      return $scope.userAccessList = data;
    });
    return $scope.viewUserDetail = function(username) {
      return JSONService.getUserInfo(username).success(function(data) {
        $rootScope.userDetail = data;
        return $location.path('/userDetail');
      });
    };
  });

  app.directive('ticketsDatatable', function($browser) {
    return {
      link: function($scope, element, iAttrs) {
        var toWatch;

        toWatch = element.attr('tickets-datatable');
        return $scope.$watch(toWatch, function(newValue, oldValue) {
          if (newValue) {
            return $(element).dataTable({
              bFilter: false
            });
          }
        });
      }
    };
  });

  app.service('JSONService', function($http) {
    console.log('Started the JSONService');
    this.getUserAccess = function() {
      return $http.get('/statisticsController/getUserAccess');
    };
    return this.getUserInfo = function(username) {
      return $http.get('/statisticsController/getUserInfo', {
        params: {
          'username': username
        }
      });
    };
  });

  app.controller('UserDetailController', function($scope, $browser, JSONService) {});

}).call(this);
